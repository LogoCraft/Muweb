<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basit Not Defteri</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Genel fontu ayarla */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-xl mx-auto bg-white shadow-xl rounded-2xl p-6 md:p-8">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 border-b pb-2">Basit Not Defteri</h1>

        <!-- Not Ekleme Formu -->
        <div class="mb-8 p-4 bg-indigo-50 rounded-xl shadow-inner">
            <textarea id="noteInput"
                      class="w-full p-3 mb-3 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150"
                      rows="3"
                      placeholder="Yeni notunuzu buraya yazın..."
                      maxlength="300"></textarea>
            <button onclick="addNote()"
                    class="w-full bg-indigo-600 text-white font-semibold py-2 rounded-lg hover:bg-indigo-700 transition duration-200 shadow-md hover:shadow-lg">
                Notu Kaydet
            </button>
        </div>

        <!-- Not Listesi -->
        <div>
            <h2 class="text-xl font-bold text-gray-700 mb-4">Kaydedilmiş Notlar:</h2>
            <div id="notesContainer" class="space-y-4">
                <!-- Notlar buraya JavaScript ile eklenecek -->
                <p id="emptyMessage" class="text-gray-500 text-center italic hidden">Henüz hiç notunuz yok.</p>
            </div>
        </div>
    </div>

    <script>
        // Firestore değil, tarayıcının yerel depolama alanı (localStorage) kullanılıyor.
        const STORAGE_KEY = 'simpleNotes';
        const noteInput = document.getElementById('noteInput');
        const notesContainer = document.getElementById('notesContainer');
        const emptyMessage = document.getElementById('emptyMessage');
        
        let notes = []; // Notları tutacak dizi

        // 1. Notları localStorage'dan yükle
        function loadNotes() {
            try {
                const storedNotes = localStorage.getItem(STORAGE_KEY);
                notes = storedNotes ? JSON.parse(storedNotes) : [];
            } catch (error) {
                console.error("Notlar yüklenirken hata oluştu:", error);
                // Hata durumunda boş bir dizi ile devam et
                notes = [];
            }
        }

        // 2. Notları localStorage'a kaydet
        function saveNotes() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
            } catch (error) {
                console.error("Notlar kaydedilirken hata oluştu:", error);
                // Kullanıcıya bilgi verilebilir
                showStatusMessage("Kaydetme hatası: Tarayıcı depolama alanı dolu olabilir.", 'bg-red-500');
            }
        }

        // Durum mesajı göstermek için basit bir fonksiyon (alert yerine)
        function showStatusMessage(message, bgColor) {
            const statusDiv = document.createElement('div');
            statusDiv.className = `fixed top-4 right-4 p-4 rounded-lg text-white font-semibold shadow-xl z-50 ${bgColor} transition-opacity duration-300`;
            statusDiv.textContent = message;
            document.body.appendChild(statusDiv);
            
            setTimeout(() => {
                statusDiv.classList.add('opacity-0');
                statusDiv.addEventListener('transitionend', () => statusDiv.remove());
            }, 3000);
        }

        // 3. Notları arayüze çiz
        function renderNotes() {
            notesContainer.innerHTML = ''; // Önceki listeyi temizle

            if (notes.length === 0) {
                emptyMessage.classList.remove('hidden');
                return;
            } else {
                emptyMessage.classList.add('hidden');
            }

            // Notları ters sırada (en yeni en üstte) göster
            notes.slice().reverse().forEach((note, originalIndex) => {
                // Not dizisi ters çevrildiği için, silme işlemi için doğru indeksi bulmalıyız.
                // Notu eklenme sırasına göre göstermek daha basit olur. Yeni notları listenin başına ekleyelim.
                // NOT: Eğer `reverse()` kullanmak istemiyorsak, yeni notları direkt dizinin başına ekleriz (notes.unshift).

                // Bu yapıda notes.reverse().forEach kullandığımız için,
                // silme işlemini yaparken notun içeriğini kullanmak daha güvenli olabilir.
                // Ancak bu, birden fazla aynı nota sahip olunduğunda sorun yaratır.
                
                // En iyisi, notlara benzersiz bir ID eklemek.
                // Ancak basitlik istendiği için, direkt diziyi tersten göstereceğim ve silme işlemini
                // renderNotes'da reverse yapmadan, dizinin sonuna ekleme yaparak çözeceğim.
                // Şimdi notları en eskiden en yeniye doğru (notes dizisi sırasıyla) gösterelim ve CSS ile ters çevirelim.

                const noteElement = document.createElement('div');
                noteElement.className = 'flex justify-between items-start bg-gray-100 p-4 rounded-lg border-l-4 border-indigo-500 shadow-sm';
                
                // Not metni
                const textParagraph = document.createElement('p');
                textParagraph.className = 'text-gray-800 text-base break-words w-11/12';
                textParagraph.textContent = note.text;
                
                // Silme butonu
                const deleteButton = document.createElement('button');
                deleteButton.className = 'text-red-500 hover:text-red-700 ml-3 transition duration-150 p-1 rounded-full hover:bg-red-100';
                deleteButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                          </svg>`;
                
                // Silme butonuna tıklama olayını ekle
                // Notun dizideki asıl indeksini (originalIndex) kullanıyoruz.
                // Notu oluştururken benzersiz ID atamadık, bu yüzden dizinin indeksini kullanıyoruz.
                deleteButton.onclick = () => deleteNote(note.id); // Artık ID kullanıyoruz.

                noteElement.appendChild(textParagraph);
                noteElement.appendChild(deleteButton);
                notesContainer.prepend(noteElement); // Yeni notları listenin başına ekle

            });
        }

        // 4. Yeni not ekle
        function addNote() {
            const noteText = noteInput.value.trim();

            if (noteText === '') {
                showStatusMessage("Lütfen bir not yazın.", 'bg-yellow-500');
                return;
            }

            // Basitlik için timestamp'i ID olarak kullanalım.
            const newNote = {
                id: Date.now(), // Benzersiz ID
                text: noteText,
                timestamp: new Date().toLocaleString('tr-TR')
            };

            notes.push(newNote); // Yeni notu dizinin sonuna ekle
            saveNotes();
            renderNotes();
            
            noteInput.value = ''; // Giriş alanını temizle
            showStatusMessage("Not başarıyla kaydedildi.", 'bg-green-500');
        }

        // 5. Not sil
        function deleteNote(idToDelete) {
            // ID'ye göre notu diziden filtrele
            const initialLength = notes.length;
            notes = notes.filter(note => note.id !== idToDelete);
            
            if (notes.length < initialLength) {
                saveNotes();
                renderNotes();
                showStatusMessage("Not silindi.", 'bg-red-500');
            }
        }

        // Uygulama yüklendiğinde:
        window.onload = function() {
            loadNotes(); // Notları yükle
            renderNotes(); // Notları göster
            
            // Enter tuşu ile not ekleme kısayolu
            noteInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    addNote();
                }
            });
        };

    </script>
</body>
</html>
